package com.google.tendengce.service.ServiceImpl;import com.google.tendengce.entity.Info;import com.google.tendengce.entity.Score;import com.google.tendengce.entity.Suser;import com.google.tendengce.mapper.InfoDao;import com.google.tendengce.mapper.ScoreDao;import com.google.tendengce.mapper.UserDao;import com.google.tendengce.service.UserService;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cache.annotation.CacheConfig;import org.springframework.cache.annotation.CachePut;import org.springframework.cache.annotation.Cacheable;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.Date;@Service@CacheConfig(cacheNames = "user")public class UserServiceImpl implements UserService {    @Autowired    private UserDao userDao;    @Autowired    private ScoreDao scoreDao;    private static final Logger logger = LoggerFactory.getLogger(UserServiceImpl.class);    @Autowired    private InfoDao infoDao;    //ID 获取用户信息//    @Cacheable(cacheNames = "user",key = "#id")    @Cacheable(cacheNames = "user",key = "#id",condition = "#id > 0")    //当参数为对象格式时，key = #参数值.id  或者  #p0.id    //当参数值为id的时候，可直接 key = “#id”  或是  #p0//    @Cacheable(cacheNames = "user")    @Override    public Suser selectByPrimaryKey(int id) {        return userDao.selectByPrimaryKey(id);    }    @Override    @Transactional    public int addUserInfo(Suser suser) {        //添加积分账号        Score score = new Score();        score.setAmount(0);        score.setCreateDate(new Date());        score.setVipFlag("N");        scoreDao.addScoreInfo(score);        //添加用户信息        Info info = new Info();        info.setInfomation("暂无信息！");        info.setValidFlag("Y");        info.setCreateDate(new Date());        infoDao.addInfo(info);        suser.setScoreId(score.getId());        suser.setInfoId(info.getId());        userDao.addUserInfo(suser);        logger.info("添加用户");        return suser.getId();    }}